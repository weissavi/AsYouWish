<!-- character_creation.html -->
<div class="grid grid-cols-2 gap-8">
  <!-- Form -->
  <div class="space-y-6 max-h-[80vh] overflow-y-auto pr-2">
    <h2 class="text-2xl font-bold text-center">Create Your Character</h2>

    <template x-if="schema.length > 0">
  <template x-for="field in schema" :key="field.field">
      <div>
        <label :for="field.field" class="block text-white font-semibold mb-1" x-html="field.label + (field.required ? ' <span class=\'text-red-500\'>*</span>' : '')"></label>

        <template x-if="field.render === 'textarea'">
          <textarea
            class="w-full p-2 rounded bg-gray-800 border border-gray-500 text-white"
            :id="field.field"
            :name="field.field"
            x-model="formData[field.field]"
            rows="3"
          ></textarea>
        </template>

        <template x-if="field.render === 'select'">
          <select
            class="w-full p-2 rounded bg-gray-800 border border-gray-500 text-white"
            :id="field.field"
            :name="field.field"
            x-model="formData[field.field]"
          >
            <option value="">-- Select --</option>
            <template x-for="option in field.options" :key="option">
              <option :value="option" x-text="option"></option>
            </template>
          </select>
        </template>

        <template x-if="field.render === 'radio'">
          <div class="flex flex-col gap-1">
            <template x-for="option in field.options" :key="option">
              <label class="inline-flex items-center space-x-2">
                <input
                  type="radio"
                  class="form-radio text-purple-500"
                  :name="field.field"
                  :value="option"
                  x-model="formData[field.field]"
                />
                <span x-text="option"></span>
              </label>
            </template>
          </div>
        </template>

        <template x-if="field.render === 'checkbox'">
          <div class="space-y-1">
            <template x-for="option in field.options" :key="option">
              <label class="inline-flex items-center space-x-2">
                <input
                  type="checkbox"
                  class="form-checkbox rounded text-purple-500"
                  :value="option"
                  :name="field.field"
                  @change="updateCheckbox(field.field, option, $event.target.checked)"
                  :checked="formData[field.field] && formData[field.field].includes(option)"
                />
                <span x-text="option"></span>
              </label>
            </template>
          </div>
        </template>

        <template x-if="field.render === 'text'">
          <input
            type="text"
            class="w-full p-2 rounded bg-gray-800 border border-gray-500 text-white"
            :id="field.field"
            :name="field.field"
            x-model="formData[field.field]"
          />
        </template>
      </div>
      </template>
</template>
  </div>

  <!-- Image (Right side) -->
  <div class="flex justify-center items-start">
    <img src="/static/images/character_default.png" alt="Character preview" class="rounded-lg shadow-lg max-h-[80vh]" />
  </div>
</div>

<!-- Buttons under scroll -->
<div class="flex justify-between mt-6 pt-4">
  <button @click="closePanel" class="bg-gray-700 hover:bg-gray-600 text-white font-semibold py-2 px-4 rounded">
    Cancel
  </button>
  <button @click="submitForm" class="bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-6 rounded">
    Save Character
  </button>
</div>
